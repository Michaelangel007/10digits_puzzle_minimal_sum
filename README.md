# Introduction

![Puzzle Picture](10digits_minimize_sum_wtyu0z22p7ae1.webp)

Can you place all 10 digits `0`, `1`, `2` through `9` inclusive, with no repeats, in the blanks `_` to minimize the sum for this puzzle?

      _ _ _ * _ _ = X

      _ _ _ * _ _ = Y

                Z = X - Y

One solution would be:

     865 * 97 = 83905
    -432 * 10 = -4320
              = 79585

# Solver

How do we solve this?  First, let's assign some variables:

     a * b = X
     c * d = Y
         Z = X - Y

We can use a _naive_ brute force search for all numbers between \[0 ... 10,000,000,000\) and assigning them to the multiplicands & multipliers.

```
     i.e.  ##########
           aaabbcccdd
```

We can use a smarter _factoradic_ brute force search of 10! between \[0 ... 3,628,800\) HOWEVER **we need "unpack" the factoradic number to the corresponding 10 digit permutation.**

# Solutions

```
 46 * 79 =  3634   -158 * 23 =  -3634   =     0  [#46/48] 0###
 54 * 69 =  3726   -138 * 27 =  -3726   =     0  [#45/48] 0###
 54 * 93 =  5022   -186 * 27 =  -5022   =     0  [#45/48] 0###
 58 * 67 =  3886   -134 * 29 =  -3886   =     0  [#45/48] 0###
 58 * 69 =  4002   -174 * 23 =  -4002   =     0  [#45/48] 0###
 58 * 73 =  4234   -146 * 29 =  -4234   =     0  [#45/48] 0###
 58 * 96 =  5568   -174 * 32 =  -5568   =     0  [#45/48] 0###
 63 * 74 =  4662   -259 * 18 =  -4662   =     0  [#45/48] 0###
 64 * 79 =  5056   -158 * 32 =  -5056   =     0  [#45/48] 0###
 67 * 58 =  3886   -134 * 29 =  -3886   =     0  [#44/48] 0###
 69 * 54 =  3726   -138 * 27 =  -3726   =     0  [#44/48] 0###
 69 * 58 =  4002   -174 * 23 =  -4002   =     0  [#44/48] 0###
 73 * 58 =  4234   -146 * 29 =  -4234   =     0  [#44/48] 0###
 73 * 96 =  7008   -584 * 12 =  -7008   =     0  [#44/48] 0###
 74 * 63 =  4662   -259 * 18 =  -4662   =     0  [#44/48] 0###
 76 * 98 =  7448   -532 * 14 =  -7448   =     0  [#44/48] 0###
 79 * 46 =  3634   -158 * 23 =  -3634   =     0  [#44/48] 0###
 79 * 64 =  5056   -158 * 32 =  -5056   =     0  [#44/48] 0###
 93 * 54 =  5022   -186 * 27 =  -5022   =     0  [#43/48] 0###
 96 * 58 =  5568   -174 * 32 =  -5568   =     0  [#43/48] 0###
 96 * 73 =  7008   -584 * 12 =  -7008   =     0  [#43/48] 0###
 98 * 76 =  7448   -532 * 14 =  -7448   =     0  [#43/48] 0###
123 * 56 =  6888   -984 *  7 =  -6888   =     0  [#42/48] 0###
130 * 97 = 12610   -485 * 26 = -12610   =     0  [#42/48] == 0
132 * 46 =  6072   -759 *  8 =  -6072   =     0  [#42/48] 0###
134 * 29 =  3886   - 58 * 67 =  -3886   =     0  [#41/48] 0###
134 * 29 =  3886   - 67 * 58 =  -3886   =     0  [#41/48] 0###
135 * 96 = 12960   -270 * 48 = -12960   =     0  [#41/48] == 0
135 * 96 = 12960   -480 * 27 = -12960   =     0  [#41/48] == 0
136 * 27 =  3672   -459 *  8 =  -3672   =     0  [#41/48] 0###
138 * 27 =  3726   - 54 * 69 =  -3726   =     0  [#41/48] 0###
138 * 27 =  3726   - 69 * 54 =  -3726   =     0  [#41/48] 0###
138 * 90 = 12420   -276 * 45 = -12420   =     0  [#41/48] == 0
145 * 76 = 11020   -290 * 38 = -11020   =     0  [#41/48] == 0
145 * 76 = 11020   -380 * 29 = -11020   =     0  [#41/48] == 0
146 * 29 =  4234   - 58 * 73 =  -4234   =     0  [#41/48] 0###
146 * 29 =  4234   - 73 * 58 =  -4234   =     0  [#41/48] 0###
148 * 70 = 10360   -296 * 35 = -10360   =     0  [#41/48] == 0
153 * 28 =  4284   -476 *  9 =  -4284   =     0  [#40/48] 0###
153 * 46 =  7038   -782 *  9 =  -7038   =     0  [#40/48] 0###
154 * 29 =  4466   -638 *  7 =  -4466   =     0  [#40/48] 0###
156 * 23 =  3588   -897 *  4 =  -3588   =     0  [#40/48] 0###
158 * 23 =  3634   - 46 * 79 =  -3634   =     0  [#40/48] 0###
158 * 23 =  3634   - 79 * 46 =  -3634   =     0  [#40/48] 0###
158 * 32 =  5056   - 64 * 79 =  -5056   =     0  [#40/48] 0###
158 * 32 =  5056   - 79 * 64 =  -5056   =     0  [#40/48] 0###
160 * 97 = 15520   -485 * 32 = -15520   =     0  [#40/48] == 0
165 * 78 = 12870   -429 * 30 = -12870   =     0  [#40/48] == 0
170 * 94 = 15980   -235 * 68 = -15980   =     0  [#39/48] == 0
174 * 23 =  4002   - 58 * 69 =  -4002   =     0  [#39/48] 0###
174 * 23 =  4002   - 69 * 58 =  -4002   =     0  [#39/48] 0###
174 * 32 =  5568   - 58 * 96 =  -5568   =     0  [#39/48] 0###
174 * 32 =  5568   - 96 * 58 =  -5568   =     0  [#39/48] 0###
184 * 95 = 17480   -230 * 76 = -17480   =     0  [#39/48] == 0
184 * 95 = 17480   -760 * 23 = -17480   =     0  [#39/48] == 0
185 * 92 = 17020   -370 * 46 = -17020   =     0  [#39/48] == 0
185 * 92 = 17020   -460 * 37 = -17020   =     0  [#39/48] == 0
186 * 27 =  5022   - 54 * 93 =  -5022   =     0  [#39/48] 0###
186 * 27 =  5022   - 93 * 54 =  -5022   =     0  [#39/48] 0###
186 * 45 =  8370   -279 * 30 =  -8370   =     0  [#39/48] == 0
186 * 90 = 16740   -372 * 45 = -16740   =     0  [#39/48] == 0
187 * 92 = 17204   -506 * 34 = -17204   =     0  [#39/48] == 0
195 * 72 = 14040   -468 * 30 = -14040   =     0  [#38/48] == 0
195 * 84 = 16380   -273 * 60 = -16380   =     0  [#38/48] == 0
217 * 80 = 17360   -496 * 35 = -17360   =     0  [#37/48] == 0
230 * 76 = 17480   -184 * 95 = -17480   =     0  [#37/48] == 0
235 * 68 = 15980   -170 * 94 = -15980   =     0  [#37/48] == 0
235 * 68 = 15980   -940 * 17 = -15980   =     0  [#37/48] == 0
237 * 60 = 14220   -948 * 15 = -14220   =     0  [#36/48] == 0
248 * 95 = 23560   -310 * 76 = -23560   =     0  [#36/48] == 0
248 * 95 = 23560   -760 * 31 = -23560   =     0  [#36/48] == 0
259 * 18 =  4662   - 63 * 74 =  -4662   =     0  [#35/48] 0###
259 * 18 =  4662   - 74 * 63 =  -4662   =     0  [#35/48] 0###
259 * 86 = 22274   -301 * 74 = -22274   =     0  [#35/48] == 0
267 * 18 =  4806   -534 *  9 =  -4806   =     0  [#35/48] 0###
269 * 14 =  3766   -538 *  7 =  -3766   =     0  [#35/48] 0###
270 * 48 = 12960   -135 * 96 = -12960   =     0  [#35/48] == 0
270 * 63 = 17010   -945 * 18 = -17010   =     0  [#35/48] == 0
273 * 18 =  4914   -546 *  9 =  -4914   =     0  [#35/48] 0###
273 * 60 = 16380   -195 * 84 = -16380   =     0  [#35/48] == 0
276 * 45 = 12420   -138 * 90 = -12420   =     0  [#34/48] == 0
279 * 30 =  8370   -186 * 45 =  -8370   =     0  [#34/48] == 0
279 * 30 =  8370   -465 * 18 =  -8370   =     0  [#34/48] == 0
290 * 38 = 11020   -145 * 76 = -11020   =     0  [#34/48] == 0
293 * 14 =  4102   -586 *  7 =  -4102   =     0  [#33/48] 0###
296 * 35 = 10360   -148 * 70 = -10360   =     0  [#33/48] == 0
296 * 51 = 15096   -408 * 37 = -15096   =     0  [#33/48] == 0
301 * 74 = 22274   -259 * 86 = -22274   =     0  [#33/48] == 0
306 * 27 =  8262   -459 * 18 =  -8262   =     0  [#33/48] == 0
307 * 58 = 17806   -614 * 29 = -17806   =     0  [#33/48] == 0
309 * 54 = 16686   -618 * 27 = -16686   =     0  [#33/48] == 0
310 * 76 = 23560   -248 * 95 = -23560   =     0  [#33/48] == 0
310 * 97 = 30070   -485 * 62 = -30070   =     0  [#33/48] == 0
318 * 60 = 19080   -795 * 24 = -19080   =     0  [#32/48] == 0
327 * 18 =  5886   -654 *  9 =  -5886   =     0  [#32/48] 0###
328 * 95 = 31160   -410 * 76 = -31160   =     0  [#32/48] == 0
328 * 95 = 31160   -760 * 41 = -31160   =     0  [#32/48] == 0
329 * 14 =  4606   -658 *  7 =  -4606   =     0  [#32/48] 0###
345 * 26 =  8970   -897 * 10 =  -8970   =     0  [#31/48] == 0
351 * 96 = 33696   -702 * 48 = -33696   =     0  [#31/48] == 0
360 * 89 = 32040   -712 * 45 = -32040   =     0  [#30/48] == 0
360 * 91 = 32760   -728 * 45 = -32760   =     0  [#30/48] == 0
370 * 46 = 17020   -185 * 92 = -17020   =     0  [#30/48] == 0
372 * 45 = 16740   -186 * 90 = -16740   =     0  [#30/48] == 0
380 * 29 = 11020   -145 * 76 = -11020   =     0  [#29/48] == 0
381 * 90 = 34290   -762 * 45 = -34290   =     0  [#29/48] == 0
406 * 37 = 15022   -518 * 29 = -15022   =     0  [#28/48] == 0
408 * 37 = 15096   -296 * 51 = -15096   =     0  [#28/48] == 0
408 * 79 = 32232   -632 * 51 = -32232   =     0  [#28/48] == 0
408 * 92 = 37536   -736 * 51 = -37536   =     0  [#28/48] == 0
410 * 76 = 31160   -328 * 95 = -31160   =     0  [#28/48] == 0
429 * 30 = 12870   -165 * 78 = -12870   =     0  [#27/48] == 0
451 * 76 = 34276   -902 * 38 = -34276   =     0  [#26/48] == 0
459 *  8 =  3672   -136 * 27 =  -3672   =     0  [#26/48] 0###
459 * 18 =  8262   -306 * 27 =  -8262   =     0  [#26/48] == 0
460 * 37 = 17020   -185 * 92 = -17020   =     0  [#26/48] == 0
465 * 18 =  8370   -279 * 30 =  -8370   =     0  [#25/48] == 0
468 * 30 = 14040   -195 * 72 = -14040   =     0  [#25/48] == 0
476 *  9 =  4284   -153 * 28 =  -4284   =     0  [#25/48] 0###
476 * 53 = 25228   -901 * 28 = -25228   =     0  [#25/48] == 0
480 * 27 = 12960   -135 * 96 = -12960   =     0  [#25/48] == 0
481 * 70 = 33670   -962 * 35 = -33670   =     0  [#24/48] == 0
485 * 26 = 12610   -130 * 97 = -12610   =     0  [#24/48] == 0
485 * 26 = 12610   -970 * 13 = -12610   =     0  [#24/48] == 0
485 * 32 = 15520   -160 * 97 = -15520   =     0  [#24/48] == 0
485 * 32 = 15520   -970 * 16 = -15520   =     0  [#24/48] == 0
485 * 62 = 30070   -310 * 97 = -30070   =     0  [#24/48] == 0
485 * 62 = 30070   -970 * 31 = -30070   =     0  [#24/48] == 0
486 * 30 = 14580   -972 * 15 = -14580   =     0  [#24/48] == 0
496 * 35 = 17360   -217 * 80 = -17360   =     0  [#24/48] == 0
504 * 89 = 44856   -712 * 63 = -44856   =     0  [#23/48] == 0
504 * 91 = 45864   -728 * 63 = -45864   =     0  [#23/48] == 0
506 * 34 = 17204   -187 * 92 = -17204   =     0  [#23/48] == 0
518 * 29 = 15022   -406 * 37 = -15022   =     0  [#23/48] == 0
532 * 14 =  7448   - 76 * 98 =  -7448   =     0  [#22/48] 0###
532 * 14 =  7448   - 98 * 76 =  -7448   =     0  [#22/48] 0###
534 *  9 =  4806   -267 * 18 =  -4806   =     0  [#22/48] 0###
538 *  7 =  3766   -269 * 14 =  -3766   =     0  [#21/48] 0###
546 *  9 =  4914   -273 * 18 =  -4914   =     0  [#21/48] 0###
584 * 12 =  7008   - 73 * 96 =  -7008   =     0  [#19/48] 0###
584 * 12 =  7008   - 96 * 73 =  -7008   =     0  [#19/48] 0###
586 *  7 =  4102   -293 * 14 =  -4102   =     0  [#19/48] 0###
614 * 29 = 17806   -307 * 58 = -17806   =     0  [#18/48] == 0
618 * 27 = 16686   -309 * 54 = -16686   =     0  [#18/48] == 0
618 * 45 = 27810   -927 * 30 = -27810   =     0  [#18/48] == 0
630 * 27 = 17010   -945 * 18 = -17010   =     0  [#17/48] == 0
632 * 51 = 32232   -408 * 79 = -32232   =     0  [#17/48] == 0
638 *  7 =  4466   -154 * 29 =  -4466   =     0  [#17/48] 0###
654 *  9 =  5886   -327 * 18 =  -5886   =     0  [#16/48] 0###
658 *  7 =  4606   -329 * 14 =  -4606   =     0  [#16/48] 0###
702 * 48 = 33696   -351 * 96 = -33696   =     0  [#14/48] == 0
702 * 63 = 44226   -819 * 54 = -44226   =     0  [#14/48] == 0
712 * 45 = 32040   -360 * 89 = -32040   =     0  [#13/48] == 0
712 * 45 = 32040   -890 * 36 = -32040   =     0  [#13/48] == 0
712 * 63 = 44856   -504 * 89 = -44856   =     0  [#13/48] == 0
716 * 30 = 21480   -895 * 24 = -21480   =     0  [#13/48] == 0
716 * 40 = 28640   -895 * 32 = -28640   =     0  [#13/48] == 0
728 * 45 = 32760   -360 * 91 = -32760   =     0  [#12/48] == 0
728 * 45 = 32760   -910 * 36 = -32760   =     0  [#12/48] == 0
728 * 63 = 45864   -504 * 91 = -45864   =     0  [#12/48] == 0
732 * 60 = 43920   -915 * 48 = -43920   =     0  [#12/48] == 0
732 * 80 = 58560   -915 * 64 = -58560   =     0  [#12/48] == 0
736 * 51 = 37536   -408 * 92 = -37536   =     0  [#12/48] == 0
748 * 20 = 14960   -935 * 16 = -14960   =     0  [#11/48] == 0
754 * 31 = 23374   -806 * 29 = -23374   =     0  [#11/48] == 0
759 *  8 =  6072   -132 * 46 =  -6072   =     0  [#11/48] 0###
760 * 23 = 17480   -184 * 95 = -17480   =     0  [#11/48] == 0
760 * 31 = 23560   -248 * 95 = -23560   =     0  [#11/48] == 0
760 * 41 = 31160   -328 * 95 = -31160   =     0  [#11/48] == 0
762 * 45 = 34290   -381 * 90 = -34290   =     0  [#11/48] == 0
782 *  9 =  7038   -153 * 46 =  -7038   =     0  [#10/48] 0###
782 * 53 = 41446   -901 * 46 = -41446   =     0  [#10/48] == 0
795 * 24 = 19080   -318 * 60 = -19080   =     0  [# 9/48] == 0
806 * 29 = 23374   -754 * 31 = -23374   =     0  [# 9/48] == 0
819 * 54 = 44226   -702 * 63 = -44226   =     0  [# 8/48] == 0
890 * 36 = 32040   -712 * 45 = -32040   =     0  [# 5/48] == 0
895 * 24 = 21480   -716 * 30 = -21480   =     0  [# 4/48] == 0
895 * 32 = 28640   -716 * 40 = -28640   =     0  [# 4/48] == 0
897 *  4 =  3588   -156 * 23 =  -3588   =     0  [# 4/48] 0###
897 * 10 =  8970   -345 * 26 =  -8970   =     0  [# 4/48] == 0
901 * 28 = 25228   -476 * 53 = -25228   =     0  [# 4/48] == 0
901 * 46 = 41446   -782 * 53 = -41446   =     0  [# 4/48] == 0
902 * 38 = 34276   -451 * 76 = -34276   =     0  [# 4/48] == 0
910 * 36 = 32760   -728 * 45 = -32760   =     0  [# 4/48] == 0
915 * 48 = 43920   -732 * 60 = -43920   =     0  [# 3/48] == 0
915 * 64 = 58560   -732 * 80 = -58560   =     0  [# 3/48] == 0
927 * 30 = 27810   -618 * 45 = -27810   =     0  [# 3/48] == 0
935 * 16 = 14960   -748 * 20 = -14960   =     0  [# 2/48] == 0
940 * 17 = 15980   -235 * 68 = -15980   =     0  [# 2/48] == 0
945 * 18 = 17010   -270 * 63 = -17010   =     0  [# 2/48] == 0
945 * 18 = 17010   -630 * 27 = -17010   =     0  [# 2/48] == 0
948 * 15 = 14220   -237 * 60 = -14220   =     0  [# 2/48] == 0
962 * 35 = 33670   -481 * 70 = -33670   =     0  [# 1/48] == 0
970 * 13 = 12610   -485 * 26 = -12610   =     0  [# 1/48] == 0
970 * 16 = 15520   -485 * 32 = -15520   =     0  [# 1/48] == 0
970 * 31 = 30070   -485 * 62 = -30070   =     0  [# 1/48] == 0
972 * 15 = 14580   -486 * 30 = -14580   =     0  [# 0/48] == 0
984 *  7 =  6888   -123 * 56 =  -6888   =     0  [# 0/48] 0###
```

**Legend:**

* `0###` summation is zero but one of the numbers starts with zero
* `== 0` summation is zero

# Thread Scaling

Here is a thread scaling comparing the naive brute force search (10,000,000,000) vs factoradic brute force search (3,628,800):

|Threads| Naive     |Factoradic|
|------:|----------:|---------:|
|     1 | 113189 ms |   248 ms |
|     2 |  66521 ms |   129 ms |
|     4 |  35180 ms |    66 ms |
|     8 |  18115 ms |    36 ms |
|    16 |   9258 ms |    17 ms |
|    24 |   7004 ms |    15 ms |
|    32 |   6225 ms |    12 ms |
|    48 |   5001 ms |    18 ms |

# Understanding Performance

Why is the factoradic version _SO much faster_ then the naive version?

* The naive version is doing (10,000,000,000 / 3,628,800) = 2755x MORE WORK.
* The naive version is wasting time searching though 100*(1 - 10!/1e10) = 99.963712% INVALID permutations.
* The factoradic version is searching 10!/1e10 = 0.036288% of the naive search space.
* The factoradic version has 100% VALID permutations.

For example:

* Naive 0000000000 is an invalid permutation
* Naive 0000000001 is an invalid permutation
* Naive 0123456789 is the first valid permutation
* Naive 9876543210 is the last valid permutation
* Naive 9876543211 is an invalid permutation
* Naive 9999999999 is an invalid permutation

* Factoradic `      0` is the permutation 0123456789
* Factoradic `      1` is the permutation 0123456798
* Factoradic `3628798` is the permutation 9876543201
* Factoradic `3628799` os the permutation 9876543210

Putting this in table form:

| Naive      | Permutation |
|-----------:|------------:|
| 0000000000 |     invalid |
| 0000000001 |     invalid |
|          : |           : |
| 0123456788 |     invalid |
| 0123456789 |       valid |
| 0123456790 |     invalid |
|          : |           : |
|          : |           : |
| 9876543209 |     invalid |
| 9876543210 |       valid |
| 9876543211 |     invalid |
|          : |           : |
| 9999999999 |     invalid |

|Factoradic| Permtuation|
|---------:|-----------:|
|        0 |  123456789 |
|        1 |  123456798 |
|        2 |  123456879 |
|        : |          : |
|  3628797 | 9876543120 |
|  3628798 | 9876543201 |
|  3628799 | 9876543210 |

The above factoradic table was made with this snippet:

```c
    printf( "|Factoradic| Permtuation|\n" );
    printf( "|---------:|-----------:|\n" );
    for( int factoradic = 0; factoradic < 3; factoradic++ )
    {
        FactoradicConverter f( factoradic );
        int64_t n = f.nNatural;
        printf( "|  %7d | %10zd |\n", factoradic, n );
    }
    printf( "|        : |          : |\n" );
    for( int factoradic = SET_PERMUTATIONS-3; factoradic < SET_PERMUTATIONS; factoradic++ )
    {
        FactoradicConverter f( factoradic );
        int64_t n = f.nNatural;
        printf( "|  %7d | %10zd |\n", factoradic, n );
    }
```
